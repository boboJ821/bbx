<!DOCTYPE HTML>
<html>
<head>
    <title>访问统计管理</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <style>
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 20px;
        }
        
        .stats-container {
            display: none;
            padding: 20px;
        }
        
        .stats-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
        }
        
        .visit-table {
            width: 100%;
            margin-top: 20px;
        }
        
        .visit-table th {
            background: rgba(73, 191, 157, 0.1);
        }
        
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        
        .filters {
            margin-bottom: 20px;
        }
    </style>
</head>
<body class="is-preload">
    <div id="main">
        <!-- 登录表单 -->
        <div class="login-container" id="loginForm">
            <h2>访问统计管理</h2>
            <form onsubmit="return login(event)">
                <div class="row gtr-uniform">
                    <div class="col-12">
                        <input type="password" id="password" placeholder="请输入访问密码" required />
                    </div>
                    <div class="col-12">
                        <input type="submit" value="登录" class="primary" />
                    </div>
                </div>
            </form>
        </div>

        <!-- 统计数据展示 -->
        <div class="stats-container" id="statsContainer">
            <h2>访问统计数据</h2>
            
            <div class="filters">
                <select id="timeRange">
                    <option value="24h">最近24小时</option>
                    <option value="7d">最近7天</option>
                    <option value="30d">最近30天</option>
                </select>
            </div>

            <div class="row">
                <div class="col-4 col-12-small">
                    <div class="stats-card">
                        <h3>总访问量</h3>
                        <p id="totalVisits">-</p>
                    </div>
                </div>
                <div class="col-4 col-12-small">
                    <div class="stats-card">
                        <h3>独立访客</h3>
                        <p id="uniqueVisitors">-</p>
                    </div>
                </div>
                <div class="col-4 col-12-small">
                    <div class="stats-card">
                        <h3>今日访问</h3>
                        <p id="todayVisits">-</p>
                    </div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="visitsChart"></canvas>
            </div>

            <div class="table-wrapper">
                <table class="visit-table">
                    <thead>
                        <tr>
                            <th>访问时间</th>
                            <th>IP地址</th>
                            <th>来源页面</th>
                            <th>设备信息</th>
                        </tr>
                    </thead>
                    <tbody id="visitsTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./admin.js"></script>
</body>
</html> 